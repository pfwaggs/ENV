[[ $LA   ]] || declare -xr LA=~/.ssh/smap/$host.load
[[ $SA   ]] || declare -xr SA=~/.ssh/smap/$host.socket
[[ $SECS ]] || declare -xr SECS=$(date +%s)
[[ $SMAP ]] || declare -xr SMAP=~/.ssh/smap/$(echo -n $USER:$SECS:$HOSTNAME|md5sum|cut -c1-6)

function agent+ () {
    [[ -s $LA ]] && . $LA || eval "$(ssh-agent -a $SA | tee $LA)"
    ssh-add -l -E md5 || ssh-add $(ls ~/.ssh/*_rsa)
    [[ $LA -ef $SMAP ]] || ln $LA $SMAP
}
